$NetBSD: patch-an,v 1.1 2010/03/04 16:00:37 taca Exp $

--- functions/imap_mailbox.php.orig	2009-07-29 11:52:32.000000000 +0900
+++ functions/imap_mailbox.php
@@ -755,8 +755,8 @@ function sqimap_mailbox_list_all($imap_s
             $boxesallbyname[$mailbox] = $g;
             $parentfolder = readMailboxParent($mailbox, $delimiter);
 			/* @FIXME shouldn't use preg_match for simple string matching */
-            if((preg_match('/^inbox'.quotemeta($delimiter).'/i', $mailbox)) ||
-               (preg_match('/^'.$folder_prefix.'/', $mailbox)) ||
+            if((preg_match('|^inbox'.quotemeta($delimiter).'|i', $mailbox)) ||
+               (preg_match('|^'.$folder_prefix.'|', $mailbox)) ||
                ( isset($boxesallbyname[$parentfolder]) && (strlen($parentfolder) > 0) ) ) {
                 if ($dm_count) {
                     $boxes[$g]['formatted']  = str_repeat('&nbsp;&nbsp;', $dm_count);
