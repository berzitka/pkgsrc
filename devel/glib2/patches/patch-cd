$NetBSD: patch-cd,v 1.2 2010/04/20 22:39:55 wiz Exp $

sysutils/gio-fam builds the gio/fam backend as a separate module.  Force it
to link against the installed version of glib2, as it is not rebuilt by the
package.

--- gio/fam/Makefile.in.orig	2010-03-16 02:52:15.000000000 +0000
+++ gio/fam/Makefile.in
@@ -76,10 +76,7 @@ am__base_list = \
 am__installdirs = "$(DESTDIR)$(giomoduledir)"
 LTLIBRARIES = $(giomodule_LTLIBRARIES)
 am__DEPENDENCIES_1 =
-libgiofam_la_DEPENDENCIES = $(top_builddir)/gio/libgio-2.0.la \
-	$(top_builddir)/gobject/libgobject-2.0.la \
-	$(top_builddir)/glib/libglib-2.0.la $(am__DEPENDENCIES_1) \
-	$(am__DEPENDENCIES_1)
+libgiofam_la_DEPENDENCIES = $(am__DEPENDENCIES_1)
 am__objects_1 =
 am_libgiofam_la_OBJECTS = libgiofam_la-fam-helper.lo \
 	libgiofam_la-fam-module.lo \
@@ -311,7 +308,7 @@ infodir = @infodir@
 install_sh = @install_sh@
 libdir = @libdir@
 libexecdir = @libexecdir@
-localedir = @localedir@
+localedir = /usr/pkg/share/locale
 localstatedir = @localstatedir@
 lt_ECHO = @lt_ECHO@
 mandir = @mandir@
@@ -369,9 +366,7 @@ libgiofam_la_CFLAGS = \
 
 libgiofam_la_LDFLAGS = $(module_flags)
 libgiofam_la_LIBADD = \
-		$(top_builddir)/gio/libgio-2.0.la \
-		$(top_builddir)/gobject/libgobject-2.0.la \
-		$(top_builddir)/glib/libglib-2.0.la \
+		$$(pkg-config --libs gio-2.0 gobject-2.0 glib-2.0) \
 		$(GLIB_LIBS) \
 		$(FAM_LIBS) \
 		$(NULL)
