$NetBSD: patch-ad,v 1.6 2010/03/11 12:46:42 drochner Exp $

--- src/file.c.orig	2005-08-10 11:33:21.000000000 +0000
+++ src/file.c
@@ -199,7 +199,7 @@ file_getTmpFilename(baseDirectory,baseFi
 #ifdef VMS
          sprintf(tempFilename,"%sgv_%lx_%x_%s_%s.tmp",tmpDirBuf,time(NULL),i,tmpName,tmpExt);
 #else
-         sprintf(tempFilename,"%sgv_%lx_%x_%s.%s.tmp",tmpDirBuf,time(NULL),i,tmpName,tmpExt);
+         sprintf(tempFilename,"%sgv_%llx_%x_%s.%s.tmp",tmpDirBuf,(long long)time(NULL),i,tmpName,tmpExt);
 #endif
          file_translateTildeInPath(tempFilename);
          no_such_file = stat(tempFilename,&s);
@@ -265,6 +265,9 @@ int file_fileIsDir(fn)
 /* file_fileIsNotUseful */
 /*############################################################*/
 
+#ifndef ENODATA
+#define ENODATA ENOMSG
+#endif
 int
 file_fileIsNotUseful(fn)
   char *fn;
