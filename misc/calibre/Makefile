# $NetBSD: Makefile,v 1.17 2011/01/13 13:38:43 wiz Exp $
#

DISTNAME=	calibre-0.6.24
PKGREVISION=	12
CATEGORIES=	misc
MASTER_SITES=	http://calibre.kovidgoyal.net/downloads/

MAINTAINER=	pkgsrc-users@NetBSD.org
HOMEPAGE=	http://calibre.kovidgoyal.net/
COMMENT=	E-book library management application
LICENSE=	gnu-gpl-v3

DEPENDS+=	help2man>=1.36.4:../../converters/help2man
DEPENDS+=	${PYPKGPREFIX}-sqlite3-[0-9]*:../../databases/py-sqlite3
DEPENDS+=	xdg-utils>=1.0.2:../../misc/xdg-utils
DEPENDS+=	poppler-utils-[0-9]*:../../print/poppler-utils
DEPENDS+=	${PYPKGPREFIX}-dns>=1.6.0:../../net/py-dns
DEPENDS+=	${PYPKGPREFIX}-lxml>=2.1.5:../../textproc/py-lxml
DEPENDS+=	${PYPKGPREFIX}-dateutil>=1.4.1:../../time/py-dateutil
DEPENDS+=	${PYPKGPREFIX}-ClientForm-[0-9]*:../../www/py-ClientForm
DEPENDS+=	${PYPKGPREFIX}-beautifulsoup>=3.0.5:../../www/py-beautifulsoup
DEPENDS+=	${PYPKGPREFIX}-mechanize>=0.1.11:../../www/py-mechanize

#PKG_DESTDIR_SUPPORT=	user-destdir

USE_LANGUAGES=	c c++
USE_TOOLS+=	pkg-config
PYTHON_VERSIONS_ACCEPTED=	26
PYDISTUTILSPKG=	yes
PYSETUPOPTARGS=	# empty
PYSETUPINSTALLARGS=	--prefix=${PREFIX}
WRKSRC=		${WRKDIR}/calibre
INSTALLATION_DIRS=	share/applications
INSTALLATION_DIRS=	share/icons

REPLACE_PYTHON=		resources/recipes/24sata.recipe
REPLACE_PYTHON+=	resources/recipes/24sata_rs.recipe
REPLACE_PYTHON+=	resources/recipes/7dias.recipe
REPLACE_PYTHON+=	resources/recipes/accountancyage.recipe
REPLACE_PYTHON+=	resources/recipes/adventuregamers.recipe
REPLACE_PYTHON+=	resources/recipes/al_jazeera.recipe
REPLACE_PYTHON+=	resources/recipes/ambito.recipe
REPLACE_PYTHON+=	resources/recipes/amspec.recipe
REPLACE_PYTHON+=	resources/recipes/ars_technica.recipe
REPLACE_PYTHON+=	resources/recipes/atlantic.recipe
REPLACE_PYTHON+=	resources/recipes/axxon_news.recipe
REPLACE_PYTHON+=	resources/recipes/azstarnet.recipe
REPLACE_PYTHON+=	resources/recipes/b92.recipe
REPLACE_PYTHON+=	resources/recipes/bbc.recipe
REPLACE_PYTHON+=	resources/recipes/bbcvietnamese.recipe
REPLACE_PYTHON+=	resources/recipes/beta.recipe
REPLACE_PYTHON+=	resources/recipes/beta_en.recipe
REPLACE_PYTHON+=	resources/recipes/blic.recipe
REPLACE_PYTHON+=	resources/recipes/borba.recipe
REPLACE_PYTHON+=	resources/recipes/buenosaireseconomico.recipe
REPLACE_PYTHON+=	resources/recipes/business_standard.recipe
REPLACE_PYTHON+=	resources/recipes/business_week.recipe
REPLACE_PYTHON+=	resources/recipes/businessworldin.recipe
REPLACE_PYTHON+=	resources/recipes/chicago_breaking_news.recipe
REPLACE_PYTHON+=	resources/recipes/cincinnati_enquirer.recipe
REPLACE_PYTHON+=	resources/recipes/clarin.recipe
REPLACE_PYTHON+=	resources/recipes/climate_progress.recipe
REPLACE_PYTHON+=	resources/recipes/coding_horror.recipe
REPLACE_PYTHON+=	resources/recipes/corriere_della_sera_en.recipe
REPLACE_PYTHON+=	resources/recipes/corriere_della_sera_it.recipe
REPLACE_PYTHON+=	resources/recipes/courrierinternational.recipe
REPLACE_PYTHON+=	resources/recipes/craigslist.recipe
REPLACE_PYTHON+=	resources/recipes/criticadigital.recipe
REPLACE_PYTHON+=	resources/recipes/cubadebate.recipe
REPLACE_PYTHON+=	resources/recipes/daily_telegraph.recipe
REPLACE_PYTHON+=	resources/recipes/dailyreckoning.recipe
REPLACE_PYTHON+=	resources/recipes/danas.recipe
REPLACE_PYTHON+=	resources/recipes/degentenaar.recipe
REPLACE_PYTHON+=	resources/recipes/demorgen_be.recipe
REPLACE_PYTHON+=	resources/recipes/der_standard.recipe
REPLACE_PYTHON+=	resources/recipes/diagonales.recipe
REPLACE_PYTHON+=	resources/recipes/discover_magazine.recipe
REPLACE_PYTHON+=	resources/recipes/dn_se.recipe
REPLACE_PYTHON+=	resources/recipes/dnevni_avaz.recipe
REPLACE_PYTHON+=	resources/recipes/dnevnik_cro.recipe
REPLACE_PYTHON+=	resources/recipes/e_novine.recipe
REPLACE_PYTHON+=	resources/recipes/ecogeek.recipe
REPLACE_PYTHON+=	resources/recipes/economist.recipe
REPLACE_PYTHON+=	resources/recipes/el_mercurio_chile.recipe
REPLACE_PYTHON+=	resources/recipes/el_pais.recipe
REPLACE_PYTHON+=	resources/recipes/el_universal.recipe
REPLACE_PYTHON+=	resources/recipes/elargentino.recipe
REPLACE_PYTHON+=	resources/recipes/elcronista.recipe
REPLACE_PYTHON+=	resources/recipes/elmundo.recipe
REPLACE_PYTHON+=	resources/recipes/elperiodico_catalan.recipe
REPLACE_PYTHON+=	resources/recipes/elperiodico_spanish.recipe
REPLACE_PYTHON+=	resources/recipes/eltiempo_hn.recipe
REPLACE_PYTHON+=	resources/recipes/endgadget.recipe
REPLACE_PYTHON+=	resources/recipes/espn.recipe
REPLACE_PYTHON+=	resources/recipes/esquire.recipe
REPLACE_PYTHON+=	resources/recipes/estadao.recipe
REPLACE_PYTHON+=	resources/recipes/exiled.recipe
REPLACE_PYTHON+=	resources/recipes/expansion_spanish.recipe
REPLACE_PYTHON+=	resources/recipes/fastcompany.recipe
REPLACE_PYTHON+=	resources/recipes/financial_times.recipe
REPLACE_PYTHON+=	resources/recipes/fokkeensukke.recipe
REPLACE_PYTHON+=	resources/recipes/freakonomics.recipe
REPLACE_PYTHON+=	resources/recipes/fudzilla.recipe
REPLACE_PYTHON+=	resources/recipes/glas_srpske.recipe
REPLACE_PYTHON+=	resources/recipes/glasjavnosti.recipe
REPLACE_PYTHON+=	resources/recipes/globe_and_mail.recipe
REPLACE_PYTHON+=	resources/recipes/granma.recipe
REPLACE_PYTHON+=	resources/recipes/guardian.recipe
REPLACE_PYTHON+=	resources/recipes/gva_be.recipe
REPLACE_PYTHON+=	resources/recipes/h1.recipe
REPLACE_PYTHON+=	resources/recipes/h2.recipe
REPLACE_PYTHON+=	resources/recipes/h3.recipe
REPLACE_PYTHON+=	resources/recipes/harpers.recipe
REPLACE_PYTHON+=	resources/recipes/harpers_full.recipe
REPLACE_PYTHON+=	resources/recipes/hln.recipe
REPLACE_PYTHON+=	resources/recipes/hln_be.recipe
REPLACE_PYTHON+=	resources/recipes/honoluluadvertiser.recipe
REPLACE_PYTHON+=	resources/recipes/honvedelem.recipe
REPLACE_PYTHON+=	resources/recipes/hrt.recipe
REPLACE_PYTHON+=	resources/recipes/huntechnet.recipe
REPLACE_PYTHON+=	resources/recipes/ieco.recipe
REPLACE_PYTHON+=	resources/recipes/infobae.recipe
REPLACE_PYTHON+=	resources/recipes/infoworld.recipe
REPLACE_PYTHON+=	resources/recipes/inquirer_net.recipe
REPLACE_PYTHON+=	resources/recipes/instapaper.recipe
REPLACE_PYTHON+=	resources/recipes/intelligencer.recipe
REPLACE_PYTHON+=	resources/recipes/japan_times.recipe
REPLACE_PYTHON+=	resources/recipes/javalobby.recipe
REPLACE_PYTHON+=	resources/recipes/jb_online.recipe
REPLACE_PYTHON+=	resources/recipes/joelonsoftware.recipe
REPLACE_PYTHON+=	resources/recipes/jutarnji.recipe
REPLACE_PYTHON+=	resources/recipes/juventudrebelde.recipe
REPLACE_PYTHON+=	resources/recipes/juventudrebelde_english.recipe
REPLACE_PYTHON+=	resources/recipes/kellog_faculty.recipe
REPLACE_PYTHON+=	resources/recipes/kellog_insight.recipe
REPLACE_PYTHON+=	resources/recipes/krstarica.recipe
REPLACE_PYTHON+=	resources/recipes/krstarica_en.recipe
REPLACE_PYTHON+=	resources/recipes/la_cuarta.recipe
REPLACE_PYTHON+=	resources/recipes/la_segunda.recipe
REPLACE_PYTHON+=	resources/recipes/la_tercera.recipe
REPLACE_PYTHON+=	resources/recipes/lamujerdemivida.recipe
REPLACE_PYTHON+=	resources/recipes/lanacion.recipe
REPLACE_PYTHON+=	resources/recipes/lanacion_chile.recipe
REPLACE_PYTHON+=	resources/recipes/laprensa.recipe
REPLACE_PYTHON+=	resources/recipes/laprensa_hn.recipe
REPLACE_PYTHON+=	resources/recipes/laprensa_ni.recipe
REPLACE_PYTHON+=	resources/recipes/latimes.recipe
REPLACE_PYTHON+=	resources/recipes/latribuna.recipe
REPLACE_PYTHON+=	resources/recipes/lavanguardia.recipe
REPLACE_PYTHON+=	resources/recipes/le_monde.recipe
REPLACE_PYTHON+=	resources/recipes/le_temps.recipe
REPLACE_PYTHON+=	resources/recipes/lemonde_dip.recipe
REPLACE_PYTHON+=	resources/recipes/liberation.recipe
REPLACE_PYTHON+=	resources/recipes/linux_magazine.recipe
REPLACE_PYTHON+=	resources/recipes/livemint.recipe
REPLACE_PYTHON+=	resources/recipes/lrb.recipe
REPLACE_PYTHON+=	resources/recipes/lwn.recipe
REPLACE_PYTHON+=	resources/recipes/marca.recipe
REPLACE_PYTHON+=	resources/recipes/mediapart.recipe
REPLACE_PYTHON+=	resources/recipes/miradasalsur.recipe
REPLACE_PYTHON+=	resources/recipes/mondedurable.recipe
REPLACE_PYTHON+=	resources/recipes/moneynews.recipe
REPLACE_PYTHON+=	resources/recipes/monitor.recipe
REPLACE_PYTHON+=	resources/recipes/moscow_times.recipe
REPLACE_PYTHON+=	resources/recipes/msdnmag_en.recipe
REPLACE_PYTHON+=	resources/recipes/nacional_cro.recipe
REPLACE_PYTHON+=	resources/recipes/nakedcapitalism.recipe
REPLACE_PYTHON+=	resources/recipes/new_scientist.recipe
REPLACE_PYTHON+=	resources/recipes/new_york_review_of_books.recipe
REPLACE_PYTHON+=	resources/recipes/new_york_review_of_books_no_sub.recipe
REPLACE_PYTHON+=	resources/recipes/new_yorker.recipe
REPLACE_PYTHON+=	resources/recipes/newsweek_argentina.recipe
REPLACE_PYTHON+=	resources/recipes/nin.recipe
REPLACE_PYTHON+=	resources/recipes/noaa.recipe
REPLACE_PYTHON+=	resources/recipes/novosti.recipe
REPLACE_PYTHON+=	resources/recipes/nspm.recipe
REPLACE_PYTHON+=	resources/recipes/nspm_int.recipe
REPLACE_PYTHON+=	resources/recipes/nytimes.recipe
REPLACE_PYTHON+=	resources/recipes/nytimes_sub.recipe
REPLACE_PYTHON+=	resources/recipes/nzz_ger.recipe
REPLACE_PYTHON+=	resources/recipes/o_globo.recipe
REPLACE_PYTHON+=	resources/recipes/ourdailybread.recipe
REPLACE_PYTHON+=	resources/recipes/outlook_india.recipe
REPLACE_PYTHON+=	resources/recipes/pagina12.recipe
REPLACE_PYTHON+=	resources/recipes/pcworld_hu.recipe
REPLACE_PYTHON+=	resources/recipes/pescanik.recipe
REPLACE_PYTHON+=	resources/recipes/phd_comics.recipe
REPLACE_PYTHON+=	resources/recipes/philly.recipe
REPLACE_PYTHON+=	resources/recipes/pobjeda.recipe
REPLACE_PYTHON+=	resources/recipes/politico.recipe
REPLACE_PYTHON+=	resources/recipes/politika.recipe
REPLACE_PYTHON+=	resources/recipes/portfolio.recipe
REPLACE_PYTHON+=	resources/recipes/pressonline.recipe
REPLACE_PYTHON+=	resources/recipes/republika.recipe
REPLACE_PYTHON+=	resources/recipes/rga.recipe
REPLACE_PYTHON+=	resources/recipes/rts.recipe
REPLACE_PYTHON+=	resources/recipes/salon.recipe
REPLACE_PYTHON+=	resources/recipes/san_fran_chronicle.recipe
REPLACE_PYTHON+=	resources/recipes/sanjosemercurynews.recipe
REPLACE_PYTHON+=	resources/recipes/science_aas.recipe
REPLACE_PYTHON+=	resources/recipes/science_news.recipe
REPLACE_PYTHON+=	resources/recipes/sciencedaily.recipe
REPLACE_PYTHON+=	resources/recipes/scientific_american.recipe
REPLACE_PYTHON+=	resources/recipes/scott_hanselman.recipe
REPLACE_PYTHON+=	resources/recipes/seattle_times.recipe
REPLACE_PYTHON+=	resources/recipes/serverside.recipe
REPLACE_PYTHON+=	resources/recipes/slashdot.recipe
REPLACE_PYTHON+=	resources/recipes/slate.recipe
REPLACE_PYTHON+=	resources/recipes/smashing.recipe
REPLACE_PYTHON+=	resources/recipes/smh.recipe
REPLACE_PYTHON+=	resources/recipes/soldiers.recipe
REPLACE_PYTHON+=	resources/recipes/spiegel_int.recipe
REPLACE_PYTHON+=	resources/recipes/spiegelde.recipe
REPLACE_PYTHON+=	resources/recipes/st_petersburg_times.recipe
REPLACE_PYTHON+=	resources/recipes/stackoverflow.recipe
REPLACE_PYTHON+=	resources/recipes/starbulletin.recipe
REPLACE_PYTHON+=	resources/recipes/straitstimes.recipe
REPLACE_PYTHON+=	resources/recipes/svd_se.recipe
REPLACE_PYTHON+=	resources/recipes/tanjug.recipe
REPLACE_PYTHON+=	resources/recipes/telegraph_uk.recipe
REPLACE_PYTHON+=	resources/recipes/teleread.recipe
REPLACE_PYTHON+=	resources/recipes/the_age.recipe
REPLACE_PYTHON+=	resources/recipes/the_budget_fashionista.recipe
REPLACE_PYTHON+=	resources/recipes/the_nation.recipe
REPLACE_PYTHON+=	resources/recipes/the_oz.recipe
REPLACE_PYTHON+=	resources/recipes/the_scotsman.recipe
REPLACE_PYTHON+=	resources/recipes/thedgesingapore.recipe
REPLACE_PYTHON+=	resources/recipes/theeconomictimes_india.recipe
REPLACE_PYTHON+=	resources/recipes/themarketticker.recipe
REPLACE_PYTHON+=	resources/recipes/theoldfoodie.recipe
REPLACE_PYTHON+=	resources/recipes/theonion.recipe
REPLACE_PYTHON+=	resources/recipes/thestar.recipe
REPLACE_PYTHON+=	resources/recipes/tijd.recipe
REPLACE_PYTHON+=	resources/recipes/time_magazine.recipe
REPLACE_PYTHON+=	resources/recipes/times_online.recipe
REPLACE_PYTHON+=	resources/recipes/tnxm.recipe
REPLACE_PYTHON+=	resources/recipes/tomshardware.recipe
REPLACE_PYTHON+=	resources/recipes/toronto_sun.recipe
REPLACE_PYTHON+=	resources/recipes/trouw.recipe
REPLACE_PYTHON+=	resources/recipes/tweakers.recipe
REPLACE_PYTHON+=	resources/recipes/twitchfilms.recipe
REPLACE_PYTHON+=	resources/recipes/uncrate.recipe
REPLACE_PYTHON+=	resources/recipes/upi.recipe
REPLACE_PYTHON+=	resources/recipes/usatoday.recipe
REPLACE_PYTHON+=	resources/recipes/usnews.recipe
REPLACE_PYTHON+=	resources/recipes/utne.recipe
REPLACE_PYTHON+=	resources/recipes/variety.recipe
REPLACE_PYTHON+=	resources/recipes/vecernji_list.recipe
REPLACE_PYTHON+=	resources/recipes/veintitres.recipe
REPLACE_PYTHON+=	resources/recipes/vijesti.recipe
REPLACE_PYTHON+=	resources/recipes/vnexpress.recipe
REPLACE_PYTHON+=	resources/recipes/volksrant.recipe
REPLACE_PYTHON+=	resources/recipes/vreme.recipe
REPLACE_PYTHON+=	resources/recipes/wikinews_en.recipe
REPLACE_PYTHON+=	resources/recipes/wired.recipe
REPLACE_PYTHON+=	resources/recipes/wsj.recipe
REPLACE_PYTHON+=	resources/recipes/zaobao.recipe
REPLACE_PYTHON+=	setup.py
REPLACE_PYTHON+=	setup/__init__.py
REPLACE_PYTHON+=	setup/build_environment.py
REPLACE_PYTHON+=	setup/check.py
REPLACE_PYTHON+=	setup/commands.py
REPLACE_PYTHON+=	setup/extensions.py
REPLACE_PYTHON+=	setup/gui.py
REPLACE_PYTHON+=	setup/install.py
REPLACE_PYTHON+=	setup/installer/__init__.py
REPLACE_PYTHON+=	setup/installer/linux/__init__.py
REPLACE_PYTHON+=	setup/installer/linux/freeze.py
REPLACE_PYTHON+=	setup/installer/linux/freeze2.py
REPLACE_PYTHON+=	setup/installer/osx/__init__.py
REPLACE_PYTHON+=	setup/installer/osx/app/__init__.py
REPLACE_PYTHON+=	setup/installer/osx/app/launcher.py
REPLACE_PYTHON+=	setup/installer/osx/app/main.py
REPLACE_PYTHON+=	setup/installer/osx/freeze.py
REPLACE_PYTHON+=	setup/installer/windows/__init__.py
REPLACE_PYTHON+=	setup/installer/windows/freeze.py
REPLACE_PYTHON+=	setup/installer/windows/site.py
REPLACE_PYTHON+=	setup/installer/windows/wix.py
REPLACE_PYTHON+=	setup/publish.py
REPLACE_PYTHON+=	setup/pygettext.py
REPLACE_PYTHON+=	setup/pypi.py
REPLACE_PYTHON+=	setup/resources.py
REPLACE_PYTHON+=	setup/translations.py
REPLACE_PYTHON+=	setup/upload.py
REPLACE_PYTHON+=	src/calibre/debug.py
REPLACE_PYTHON+=	src/calibre/devices/android/__init__.py
REPLACE_PYTHON+=	src/calibre/devices/eslick/__init__.py
REPLACE_PYTHON+=	src/calibre/devices/eslick/driver.py
REPLACE_PYTHON+=	src/calibre/devices/iriver/__init__.py
REPLACE_PYTHON+=	src/calibre/devices/iriver/driver.py
REPLACE_PYTHON+=	src/calibre/ebooks/comic/__init__.py
REPLACE_PYTHON+=	src/calibre/ebooks/compression/palmdoc.py
REPLACE_PYTHON+=	src/calibre/ebooks/conversion/config.py
REPLACE_PYTHON+=	src/calibre/ebooks/conversion/preprocess.py
REPLACE_PYTHON+=	src/calibre/ebooks/epub/output.py
REPLACE_PYTHON+=	src/calibre/ebooks/html/__init__.py
REPLACE_PYTHON+=	src/calibre/ebooks/html/input.py
REPLACE_PYTHON+=	src/calibre/ebooks/lit/input.py
REPLACE_PYTHON+=	src/calibre/ebooks/lit/output.py
REPLACE_PYTHON+=	src/calibre/ebooks/lrf/html/table_as_image.py
REPLACE_PYTHON+=	src/calibre/ebooks/lrf/input.py
REPLACE_PYTHON+=	src/calibre/ebooks/lrf/output.py
REPLACE_PYTHON+=	src/calibre/ebooks/lrf/pylrs/pylrf.py
REPLACE_PYTHON+=	src/calibre/ebooks/markdown/markdown.py
REPLACE_PYTHON+=	src/calibre/ebooks/markdown/mdx_tables.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/__init__.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/amazon.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/epub.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/fb2.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/html.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/lrx.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/odt.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/opf2.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/rar.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/toc.py
REPLACE_PYTHON+=	src/calibre/ebooks/metadata/worker.py
REPLACE_PYTHON+=	src/calibre/ebooks/mobi/__init__.py
REPLACE_PYTHON+=	src/calibre/ebooks/mobi/huffcdic.py
REPLACE_PYTHON+=	src/calibre/ebooks/mobi/langcodes.py
REPLACE_PYTHON+=	src/calibre/ebooks/mobi/output.py
REPLACE_PYTHON+=	src/calibre/ebooks/odt/__init__.py
REPLACE_PYTHON+=	src/calibre/ebooks/oeb/transforms/__init__.py
REPLACE_PYTHON+=	src/calibre/ebooks/oeb/transforms/guide.py
REPLACE_PYTHON+=	src/calibre/ebooks/oeb/transforms/jacket.py
REPLACE_PYTHON+=	src/calibre/ebooks/oeb/transforms/linearize_tables.py
REPLACE_PYTHON+=	src/calibre/ebooks/oeb/transforms/metadata.py
REPLACE_PYTHON+=	src/calibre/ebooks/oeb/transforms/rescale.py
REPLACE_PYTHON+=	src/calibre/ebooks/oeb/transforms/structure.py
REPLACE_PYTHON+=	src/calibre/ebooks/pdf/__init__.py
REPLACE_PYTHON+=	src/calibre/ebooks/pdf/reflow.py
REPLACE_PYTHON+=	src/calibre/ebooks/rtf2xml/ParseRtf.py
REPLACE_PYTHON+=	src/calibre/ebooks/rtf2xml/check_encoding.py
REPLACE_PYTHON+=	src/calibre/ebooks/txt/__init__.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/__init__.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/comic_input.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/debug.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/epub_output.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/font_key.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/look_and_feel.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/lrf_output.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/metadata.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/mobi_output.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/page_setup.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/single.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/structure_detection.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/toc.py
REPLACE_PYTHON+=	src/calibre/gui2/convert/xpath_wizard.py
REPLACE_PYTHON+=	src/calibre/gui2/cover_flow.py
REPLACE_PYTHON+=	src/calibre/gui2/dialogs/book_info.py
REPLACE_PYTHON+=	src/calibre/gui2/dialogs/config/add_save.py
REPLACE_PYTHON+=	src/calibre/gui2/dialogs/config/history.py
REPLACE_PYTHON+=	src/calibre/gui2/dialogs/config/social.py
REPLACE_PYTHON+=	src/calibre/gui2/dialogs/confirm_delete.py
REPLACE_PYTHON+=	src/calibre/gui2/dialogs/progress.py
REPLACE_PYTHON+=	src/calibre/gui2/jobs.py
REPLACE_PYTHON+=	src/calibre/gui2/metadata.py
REPLACE_PYTHON+=	src/calibre/gui2/search_box.py
REPLACE_PYTHON+=	src/calibre/gui2/tag_view.py
REPLACE_PYTHON+=	src/calibre/gui2/tools.py
REPLACE_PYTHON+=	src/calibre/gui2/viewer/documentview.py
REPLACE_PYTHON+=	src/calibre/gui2/viewer/printing.py
REPLACE_PYTHON+=	src/calibre/gui2/widgets.py
REPLACE_PYTHON+=	src/calibre/gui2/wizard/__init__.py
REPLACE_PYTHON+=	src/calibre/gui2/wizard/send_email.py
REPLACE_PYTHON+=	src/calibre/library/cli.py
REPLACE_PYTHON+=	src/calibre/library/move.py
REPLACE_PYTHON+=	src/calibre/library/save_to_disk.py
REPLACE_PYTHON+=	src/calibre/library/server.py
REPLACE_PYTHON+=	src/calibre/library/test.py
REPLACE_PYTHON+=	src/calibre/libunzip.py
REPLACE_PYTHON+=	src/calibre/manual/custom.py
REPLACE_PYTHON+=	src/calibre/manual/epub.py
REPLACE_PYTHON+=	src/calibre/trac/bzr_commit_plugin.py
REPLACE_PYTHON+=	src/calibre/translations/msgfmt.py
REPLACE_PYTHON+=	src/calibre/utils/__init__.py
REPLACE_PYTHON+=	src/calibre/utils/complete.py
REPLACE_PYTHON+=	src/calibre/utils/fonts/__init__.py
REPLACE_PYTHON+=	src/calibre/utils/ipc/__init__.py
REPLACE_PYTHON+=	src/calibre/utils/ipc/job.py
REPLACE_PYTHON+=	src/calibre/utils/ipc/launch.py
REPLACE_PYTHON+=	src/calibre/utils/ipc/server.py
REPLACE_PYTHON+=	src/calibre/utils/ipc/worker.py
REPLACE_PYTHON+=	src/calibre/utils/localization.py
REPLACE_PYTHON+=	src/calibre/utils/osx_symlinks.py
REPLACE_PYTHON+=	src/calibre/utils/pdftk.py
REPLACE_PYTHON+=	src/calibre/utils/podofo/__init__.py
REPLACE_PYTHON+=	src/calibre/utils/resources.py
REPLACE_PYTHON+=	src/calibre/utils/search_query_parser.py
REPLACE_PYTHON+=	src/calibre/utils/sftp.py
REPLACE_PYTHON+=	src/calibre/utils/sigil.py
REPLACE_PYTHON+=	src/calibre/web/feeds/__init__.py
REPLACE_PYTHON+=	src/calibre/web/feeds/feedparser.py
REPLACE_PYTHON+=	src/calibre/web/feeds/input.py
REPLACE_PYTHON+=	src/calibre/web/feeds/recipes/__init__.py
REPLACE_PYTHON+=	src/calibre/web/feeds/recipes/collection.py
REPLACE_PYTHON+=	src/calibre/web/feeds/recipes/model.py
REPLACE_PYTHON+=	src/calibre/web/feeds/templates.py
REPLACE_PYTHON+=	src/calibre/web/fetch/simple.py
REPLACE_PYTHON+=	src/cherrypy/_cpmodpy.py
REPLACE_PYTHON+=	src/cherrypy/cherryd
REPLACE_PYTHON+=	src/cssutils/__init__.py
REPLACE_PYTHON+=	src/cssutils/codec.py
REPLACE_PYTHON+=	src/cssutils/errorhandler.py
REPLACE_PYTHON+=	src/cssutils/parse.py
REPLACE_PYTHON+=	src/cssutils/serialize.py
REPLACE_PYTHON+=	src/cssutils/tokenize2.py
REPLACE_PYTHON+=	src/encutils/__init__.py
REPLACE_PYTHON+=	src/odf/element.py
REPLACE_PYTHON+=	src/odf/elementtypes.py
REPLACE_PYTHON+=	src/odf/load.py
REPLACE_PYTHON+=	src/odf/manifest.py
REPLACE_PYTHON+=	src/odf/odf2xhtml.py
REPLACE_PYTHON+=	src/odf/odfmanifest.py
REPLACE_PYTHON+=	src/odf/thumbnail.py
REPLACE_PYTHON+=	src/odf/userfield.py

SUBST_CLASSES+=		prefix
SUBST_SED.prefix=	-e "s,^QMAKE =.*,QMAKE = '${PREFIX}/qt4/bin/qmake',"
SUBST_MESSAGE.prefix=	Fixing path to QMAKE
SUBST_STAGE.prefix=	post-patch
SUBST_FILES.prefix=	setup/build_environment.py

SUBST_CLASSES+=		path
SUBST_SED.path=		-e "s,^\#!/usr/bin/env python,\#!${PYTHONBIN},"
SUBST_MESSAGE.path=	Fixing path to python.
SUBST_STAGE.path=	post-patch
SUBST_FILES.path=	setup/install.py

MAKE_ENV+=		FC_INC_DIR=${BUILDLINK_PREFIX.fontconfig}/include/fontconfig
MAKE_ENV+=		FC_LIB_DIR=${BUILDLINK_PREFIX.fontconfig}/lib
MAKE_ENV+=		PODOFO_INC_DIR=${BUILDLINK_PREFIX.podofo}/include/podofo
MAKE_ENV+=		PODOFO_LIB_DIR=${BUILDLINK_PREFIX.podofo}/lib
#MAKE_ENV+=		XDG_UTILS_DEBUG_LEVEL=100

.include "../../lang/python/application.mk"
BUILDLINK_API_DEPENDS.libusb+=	libusb>=0.1.12
.include "../../devel/libusb/buildlink3.mk"
.include "../../fonts/fontconfig/buildlink3.mk"
BUILDLINK_API_DEPENDS.ImageMagick+=	ImageMagick>=6.3.5
.include "../../graphics/ImageMagick/buildlink3.mk"
BUILDLINK_API_DEPENDS.pyimaging+=	${PYPKGPREFIX}-imaging>=1.1.6
.include "../../graphics/py-imaging/buildlink3.mk"
BUILDLINK_API_DEPENDS.libwmf+=	libwmf>=0.2.8
.include "../../graphics/libwmf/buildlink3.mk"
.include "../../lang/python/egg.mk"
_PYSETUPTOOLSINSTALLARGS=	# empty
#.include "../../lang/python/extension.mk"
.include "../../print/podofo/buildlink3.mk"
.include "../../print/poppler-includes/buildlink3.mk"
.include "../../print/poppler/buildlink3.mk"
BUILDLINK_API_DEPENDS.poppler-qt4+=	poppler-qt4>=0.10.6
.include "../../print/poppler-qt4/buildlink3.mk"
.include "../../sysutils/hal/buildlink3.mk"
BUILDLINK_API_DEPENDS.py-dbus+=	${PYPKGPREFIX}-dbus>=0.82.2
.include "../../sysutils/py-dbus/buildlink3.mk"
.include "../../textproc/py-elementtree/buildlink3.mk"
.include "../../x11/py-sip/buildlink3.mk"
BUILDLINK_API_DEPENDS.py-qt4+=	${PYPKGPREFIX}-qt4>=4.5.1
.include "../../x11/py-qt4/buildlink3.mk"
BUILDLINK_API_DEPENDS.qt4-tools+=	qt4-tools>=4.5.1
.include "../../x11/qt4-tools/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
