$NetBSD: patch-db,v 1.3 2010/04/29 08:44:30 kefren Exp $
--- mono/utils/mono-proclib.c.orig	2010-04-22 18:37:45.000000000 +0300
+++ mono/utils/mono-proclib.c	2010-04-29 09:47:24.000000000 +0300
@@ -13,15 +13,20 @@
 #endif
 
 /* FIXME: bsds untested */
-#if defined(__APPLE__) || defined(__FreeBSD__) || defined(__OpenBSD__) || defined(__NetBSD__)
+#if defined(__APPLE__) || defined(__FreeBSD__) || defined(__OpenBSD__) || defined(__NetBSD__) || defined(__DragonFly__)
 #include <sys/param.h>
 #include <sys/types.h>
 #include <sys/sysctl.h>
+#ifndef __DragonFly__
 #include <sys/proc.h>
+#endif
 #ifdef HAVE_SYS_USER_H
 #include <sys/user.h>
 #endif
-#ifdef HAVE_STRUCT_KINFO_PROC_KP_PROC
+#if !(defined(__NetBSD__) || defined(__DragonFly__))
+#define kinfo_pid_member kp_pid
+#define kinfo_name_member kp_comm
+#elif HAVE_STRUCT_KINFO_PROC_KP_PROC
 #  ifdef KERN_PROC2
 #    define kinfo_pid_member p_pid
 #    define kinfo_name_member p_comm
