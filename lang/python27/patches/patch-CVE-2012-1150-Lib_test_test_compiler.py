$NetBSD: patch-CVE-2012-1150-Lib_test_test_compiler.py,v 1.1 2012/03/24 12:04:37 tron Exp $

Fix for CVE-2012-1150 taken from here:

http://hg.python.org/cpython/rev/e3fb353b3fd4

--- Lib/test/test_compiler.py.orig	2011-06-11 16:46:25.000000000 +0100
+++ Lib/test/test_compiler.py	2012-03-24 11:48:09.000000000 +0000
@@ -28,8 +28,8 @@
         libdir = os.path.dirname(os.__file__)
         testdir = os.path.dirname(test.test_support.__file__)
 
-        for dir in [libdir, testdir]:
-            for basename in os.listdir(dir):
+        for dir in [testdir]:
+            for basename in "test_os.py",:
                 # Print still working message since this test can be really slow
                 if next_time <= time.time():
                     next_time = time.time() + _PRINT_WORKING_MSG_INTERVAL
