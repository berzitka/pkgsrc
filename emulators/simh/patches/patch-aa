$NetBSD: patch-aa,v 1.10 2012/05/26 08:50:53 obache Exp $

--- makefile.orig	2012-04-23 07:28:04.000000000 +0000
+++ makefile
@@ -72,8 +72,8 @@ ifeq ($(WIN32),)  #*nix Environments (&&
     endif
     OS_LDFLAGS = -lm
   else # Non-Android Builds
-    INCPATH:=/usr/include
-    LIBPATH:=/usr/lib
+    INCPATH:=${BUILDLINK_DIR}/include /usr/include
+    LIBPATH:=${BUILDLINK_DIR}/lib /usr/lib
     OS_CCDEFS = -D_GNU_SOURCE
     GCC_OPTIMIZERS_CMD = $(GCC) -v --help 2>&1
     GCC_WARNINGS_CMD = $(GCC) -v --help 2>&1
@@ -141,11 +141,11 @@ ifeq ($(WIN32),)  #*nix Environments (&&
   endif
   ifneq (,$(call find_lib,pthread))
     ifneq (,$(call find_include,pthread))
-      OS_CCDEFS += -DUSE_READER_THREAD
+      OS_CCDEFS += -DUSE_READER_THREAD ${PTHREAD_CFLAGS}
       ifeq (,$(NOASYNCH))
         OS_CCDEFS += -DSIM_ASYNCH_IO 
       endif
-      OS_LDFLAGS += -lpthread
+      OS_LDFLAGS += ${PTHREAD_LDFLAGS} ${PTHREAD_LIBS}
       $(info using libpthread: $(call find_lib,pthread) $(call find_include,pthread))
     endif
   endif
