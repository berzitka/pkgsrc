$NetBSD: patch-aa,v 1.1 2010/08/27 02:06:50 obache Exp $

--- extconf.rb.orig	2010-08-26 12:57:21.000000000 +0000
+++ extconf.rb
@@ -13,7 +13,7 @@ ruby = File.join(RbConfig::CONFIG['bindi
                  RbConfig::CONFIG["EXEEXT"])
 
 Dir.chdir(ext_dir.to_s) do
-  system(ruby, "extconf.rb")
+  system(ruby, "extconf.rb", *$*)
 end
 
 create_makefile("cairo")
@@ -22,24 +22,24 @@ FileUtils.mv("Makefile", "Makefile.lib")
 File.open("Makefile", "w") do |makefile|
   makefile.puts(<<-EOM)
 all:
-	$(MAKE) $(MAKEFLAGS) -C ext/cairo
-	$(MAKE) $(MAKEFLAGS) -f Makefile.lib
+	(cd ext/cairo && $(MAKE))
+	$(MAKE) -f Makefile.lib
 
 install:
-	$(MAKE) $(MAKEFLAGS) -C ext/cairo install
-	$(MAKE) $(MAKEFLAGS) -f Makefile.lib install
+	(cd ext/cairo && $(MAKE) install)
+	$(MAKE) -f Makefile.lib install
 
 site-install:
-	$(MAKE) $(MAKEFLAGS) -C ext/cairo site-install
-	$(MAKE) $(MAKEFLAGS) -f Makefile.lib site-install
+	(cd ext/cairo && $(MAKE) site-install)
+	$(MAKE) -f Makefile.lib site-install
 
 clean:
-	$(MAKE) $(MAKEFLAGS) -C ext/cairo clean
-	$(MAKE) $(MAKEFLAGS) -f Makefile.lib clean
+	(cd ext/cairo && $(MAKE) clean)
+	$(MAKE) -f Makefile.lib clean
 
 distclean:
-	$(MAKE) $(MAKEFLAGS) -C ext/cairo distclean
-	$(MAKE) $(MAKEFLAGS) -f Makefile.lib distclean
+	(cd ext/cairo && $(MAKE) distclean)
+	$(MAKE) -f Makefile.lib distclean
 	@rm -f Makefile.lib
 EOM
 end
