# $NetBSD: Makefile,v 1.6 2010/09/17 08:04:15 wiz Exp $
#

DISTNAME=	mxcl-liblastfm-0.3.2-0-gc64ed83
PKGNAME=	liblastfm-0.3.2
CATEGORIES=	audio net
MASTER_SITES=	http://download.github.com/

MAINTAINER=	pkgsrc-users@NetBSD.org
HOMEPAGE=	http://github.com/mxcl/liblastfm/tree/master
COMMENT=	Library for accessing last.fm
LICENSE=	gnu-gpl-v2

PKG_DESTDIR_SUPPORT=	user-destdir

WRKSRC=		${WRKDIR}/mxcl-liblastfm-3539836

USE_LANGUAGES=		c c++
USE_LIBTOOL=		yes
USE_TOOLS+=		bash gmake perl pkg-config
PREPEND_PATH+=		${QTDIR}/bin

HAS_CONFIGURE=		yes
CONFIGURE_ARGS+=	--prefix ${PREFIX}
#CONFIGURE_ARGS+=	--release
#CPPFLAGS+=		-fPIC
CONFIG_SHELL=		${RUBY}

REPLACE_PERL=		admin/findsrc

REPLACE_RUBY+=		admin/which_qmake.rb
REPLACE_RUBY+=		admin/lastfm.h.rb
REPLACE_RUBY+=		admin/Makefile.rb
REPLACE_RUBY+=		admin/platform.rb
REPLACE_RUBY+=		admin/utils.rb
REPLACE_RUBY+=		admin/qpp

pre-configure:
	${LN} -sf ${QTDIR}/bin/qmake ${BUILDLINK_DIR}/bin/

.include "../../audio/libsamplerate/buildlink3.mk"
BUILDLINK_DEPMETHOD.${RUBY_BASE}=	build
.include "../../lang/ruby/replace.mk"
.include "../../lang/ruby/buildlink3.mk"
.include "../../math/fftwf/buildlink3.mk"
.include "../../x11/qt4-libs/buildlink3.mk"
.include "../../x11/qt4-tools/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
