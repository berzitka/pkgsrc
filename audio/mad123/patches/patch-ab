$NetBSD: patch-ab,v 1.2 2012/02/05 20:39:50 sbd Exp $

--- audio_dev.c.orig	2004-09-22 09:23:43.000000000 +0000
+++ audio_dev.c
@@ -22,7 +22,9 @@
 #include <sys/types.h>
 #include <sys/param.h>
 #include <sys/fcntl.h>
+#ifndef __linux__
 #include <sys/filio.h>
+#endif
 #include <sys/ioctl.h>
 #include <sys/mman.h>
 #include <sys/wait.h>
@@ -43,6 +45,10 @@
 #undef WORDS_BIGENDIAN
 #endif
 
+#ifdef __DragonFly__
+typedef unsigned int nfds_t;
+#endif
+
 #define PCM_BUFFSIZE	((sizeof(((struct mad_pcm *)0)->samples) / \
 			    sizeof(mad_fixed_t)) * 2)
 struct pcm_data {
@@ -97,8 +103,12 @@ static void	audio_convert_dither(unsigne
 
 
 static const struct audio_dev_backend *audio_dev_backends[] = {
+#ifndef NOSUN
 	&audio_dev_sun,
+#endif
+#ifndef NOOSS
 	&audio_dev_pcm,
+#endif
 #ifndef NOARTS
 	&audio_dev_arts,
 #endif
