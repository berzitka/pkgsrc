$NetBSD: patch-aa,v 1.17 2010/04/16 13:49:29 wiz Exp $

Upstream patch for Info applet crash.

--- src/context/applets/info/InfoApplet.cpp.orig	2010-03-10 23:12:15.000000000 +0000
+++ src/context/applets/info/InfoApplet.cpp
@@ -40,18 +40,30 @@ QString InfoApplet::s_defaultHtml = "<ht
 
 InfoApplet::InfoApplet( QObject* parent, const QVariantList& args )
     : Context::Applet( parent, args )
+    , m_webView( 0 )
     , m_initialized( false )
     , m_currentPlaylist( 0 )
+   
 {
     setHasConfigurationInterface( false );
     setBackgroundHints( Plasma::Applet::NoBackground );
+}
+
+InfoApplet::~InfoApplet()
+{
+    delete m_webView;
+}
+
+
+void  InfoApplet::init()
+{
 
     dataEngine( "amarok-info" )->connectSource( "info", this );
 
     m_webView = new AmarokWebView( this );
 
     resize( 500, -1 );
-    
+
     QPalette p = m_webView->palette();
     p.setColor( QPalette::Dark, QColor( 255, 255, 255, 0)  );
     p.setColor( QPalette::Window, QColor( 255, 255, 255, 0)  );
@@ -62,11 +74,6 @@ InfoApplet::InfoApplet( QObject* parent,
     constraintsEvent();
 }
 
-InfoApplet::~InfoApplet()
-{
-    delete m_webView;
-}
-
 void InfoApplet::constraintsEvent( Plasma::Constraints constraints )
 {
     Q_UNUSED( constraints )
